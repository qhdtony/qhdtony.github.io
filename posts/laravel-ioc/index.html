<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Laravel Ioc | ä¸“æ³¨å½“ä¸‹</title><meta name=keywords content="laravel,ioc,di,æ§åˆ¶åè½¬"><meta name=description content='ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚
è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
IoC å®¹å™¨çš„ä½œç”¨
1. è§£è€¦
    * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚
    * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚
2. ä¾èµ–ç®¡ç†
    * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚
3. æœåŠ¡è§£æ
    * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚

Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š
1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š
2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ–
æ ¸å¿ƒæ–‡ä»¶ï¼š
* Illuminate\Container\Container
äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚
1ã€æ™®é€šå†™æ³•
/*
éœ€æ±‚ï¼š
ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚
ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚
æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å°
å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç 
*/
class Driver {
    public function __construct() {
        $this->car = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±»
    }


    public function drive() {
        $this->car->run();
    }
}

(new Driver())->drive();

Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚

è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚
ç±»ä¼¼äº:
class Driver {
    public function __construct($carname) {
        $this->car = new BMW($carname);//æ¯æ¬¡éƒ½è¦New
    }
    public function drive() {
        $this->car->run();
    }
}
(new Driver("civic"))->drive();

ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚
è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š
$this->app->bind(Car::class, Tesla::class);
2ã€æ§åˆ¶åè½¬å†™æ³•'><meta name=author content><link rel=canonical href=https://qhdtony.github.io/posts/laravel-ioc/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://qhdtony.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qhdtony.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qhdtony.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qhdtony.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qhdtony.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://qhdtony.github.io/posts/laravel-ioc/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qhdtony.github.io/posts/laravel-ioc/"><meta property="og:site_name" content="ä¸“æ³¨å½“ä¸‹"><meta property="og:title" content="Laravel Ioc"><meta property="og:description" content='ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚
è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
IoC å®¹å™¨çš„ä½œç”¨ 1. è§£è€¦ * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚ * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚ 2. ä¾èµ–ç®¡ç† * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚ 3. æœåŠ¡è§£æ * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚ Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š 1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š 2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ– æ ¸å¿ƒæ–‡ä»¶ï¼š * Illuminate\Container\Container äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚
1ã€æ™®é€šå†™æ³•
/* éœ€æ±‚ï¼š ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚ ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚ æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å° å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç  */ class Driver { public function __construct() { $this->car = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±» } public function drive() { $this->car->run(); } } (new Driver())->drive(); Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚ è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚ ç±»ä¼¼äº: class Driver { public function __construct($carname) { $this->car = new BMW($carname);//æ¯æ¬¡éƒ½è¦New } public function drive() { $this->car->run(); } } (new Driver("civic"))->drive(); ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚ è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š $this->app->bind(Car::class, Tesla::class); 2ã€æ§åˆ¶åè½¬å†™æ³•'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-23T14:42:20+08:00"><meta property="article:modified_time" content="2025-08-23T14:42:20+08:00"><meta property="article:tag" content="Laravel"><meta property="article:tag" content="Ioc"><meta property="article:tag" content="Di"><meta property="article:tag" content="æ§åˆ¶åè½¬"><meta name=twitter:card content="summary"><meta name=twitter:title content="Laravel Ioc"><meta name=twitter:description content='ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚
è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚
IoC å®¹å™¨çš„ä½œç”¨
1. è§£è€¦
    * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚
    * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚
2. ä¾èµ–ç®¡ç†
    * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚
3. æœåŠ¡è§£æ
    * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚

Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š
1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š
2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ–
æ ¸å¿ƒæ–‡ä»¶ï¼š
* Illuminate\Container\Container
äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚
1ã€æ™®é€šå†™æ³•
/*
éœ€æ±‚ï¼š
ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚
ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚
æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å°
å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç 
*/
class Driver {
    public function __construct() {
        $this->car = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±»
    }


    public function drive() {
        $this->car->run();
    }
}

(new Driver())->drive();

Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚

è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚
ç±»ä¼¼äº:
class Driver {
    public function __construct($carname) {
        $this->car = new BMW($carname);//æ¯æ¬¡éƒ½è¦New
    }
    public function drive() {
        $this->car->run();
    }
}
(new Driver("civic"))->drive();

ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚
è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š
$this->app->bind(Car::class, Tesla::class);
2ã€æ§åˆ¶åè½¬å†™æ³•'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qhdtony.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Laravel Ioc","item":"https://qhdtony.github.io/posts/laravel-ioc/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Laravel Ioc","name":"Laravel Ioc","description":"ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚\nè´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\nIoC å®¹å™¨çš„ä½œç”¨ 1. è§£è€¦ * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚ * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚ 2. ä¾èµ–ç®¡ç† * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚ 3. æœåŠ¡è§£æ * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚ Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š 1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š 2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ– æ ¸å¿ƒæ–‡ä»¶ï¼š * Illuminate\\Container\\Container äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚\n1ã€æ™®é€šå†™æ³•\n/* éœ€æ±‚ï¼š ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚ ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚ æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å° å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç  */ class Driver { public function __construct() { $this-\u0026gt;car = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±» } public function drive() { $this-\u0026gt;car-\u0026gt;run(); } } (new Driver())-\u0026gt;drive(); Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚ è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚ ç±»ä¼¼äº: class Driver { public function __construct($carname) { $this-\u0026gt;car = new BMW($carname);//æ¯æ¬¡éƒ½è¦New } public function drive() { $this-\u0026gt;car-\u0026gt;run(); } } (new Driver(\u0026#34;civic\u0026#34;))-\u0026gt;drive(); ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚ è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š $this-\u0026gt;app-\u0026gt;bind(Car::class, Tesla::class); 2ã€æ§åˆ¶åè½¬å†™æ³•\n","keywords":["laravel","ioc","di","æ§åˆ¶åè½¬"],"articleBody":"ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚\nè´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\nIoC å®¹å™¨çš„ä½œç”¨ 1. è§£è€¦ * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚ * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚ 2. ä¾èµ–ç®¡ç† * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚ 3. æœåŠ¡è§£æ * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚ Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š 1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š 2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ– æ ¸å¿ƒæ–‡ä»¶ï¼š * Illuminate\\Container\\Container äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚\n1ã€æ™®é€šå†™æ³•\n/* éœ€æ±‚ï¼š ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚ ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚ æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å° å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç  */ class Driver { public function __construct() { $this-\u003ecar = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±» } public function drive() { $this-\u003ecar-\u003erun(); } } (new Driver())-\u003edrive(); Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚ è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚ ç±»ä¼¼äº: class Driver { public function __construct($carname) { $this-\u003ecar = new BMW($carname);//æ¯æ¬¡éƒ½è¦New } public function drive() { $this-\u003ecar-\u003erun(); } } (new Driver(\"civic\"))-\u003edrive(); ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚ è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š $this-\u003eapp-\u003ebind(Car::class, Tesla::class); 2ã€æ§åˆ¶åè½¬å†™æ³•\n\u003c?php //éœ€æ±‚ï¼šæˆ‘è¦ä¸€è¾†è½¦ï¼Œå•¥ç‰Œå­æ— æ‰€è°“ï¼Œèƒ½è·‘å°±è¡Œã€‚ //ä½ åªè´Ÿè´£å¼€è½¦ï¼Œä¸å…³å¿ƒè½¦æ˜¯æ€ä¹ˆé€ å‡ºæ¥çš„ã€‚ //åˆ‡æ¢å®ç°çš„æ—¶å€™ï¼Œåªæ”¹ ç»‘å®šå…³ç³»ï¼Œä¸ç”¨åŠ¨ä¸šåŠ¡ä»£ç ã€‚ Interface Car { Public function run(); } Class CT5 implements Car { Public function run() { echo \"CT5 run\"; } } Class Accord implements Car { Public function run() { echo \"Honda run\"; } } Class Driver { Protected $car; Public function __construct(Car $car) { $this-\u003ecar = $car; } Public function drive() { $this-\u003ecar-\u003erun(); } } (new Driver(new CT5()))-\u003edrive();//è¿™æ ·å†™ä¼šå¾ˆå¤æ‚ã€‚ æ›¿æ¢æˆç±»ä¼¼ $this-\u003eapp-\u003ebind(Car::class,CT5::class); laravelçš„å†™æ³• å°±æ¯”è¾ƒæ¸…æ™°ã€‚ ä¸‰ã€Laravel ä¸­ æ€ä¹ˆç”¨\n1ã€ç»‘å®šå’Œè§£æ\nuse App\\Services\\UserService; use App\\Services\\Contracts\\UserServiceInterface; // åœ¨æœåŠ¡æä¾›è€…ä¸­ç»‘å®šï¼ˆAppServiceProvider æˆ–è‡ªå®šä¹‰ï¼‰ $this-\u003eapp-\u003ebind(UserServiceInterface::class, UserService::class); // åœ¨æ§åˆ¶å™¨æˆ–å…¶ä»–åœ°æ–¹è§£æ $userService = app(UserServiceInterface::class); // æˆ–è€… $userService = resolve(UserServiceInterface::class); /* bind()ï¼šæ¯æ¬¡è§£æè¿”å›ä¸€ä¸ªæ–°å®ä¾‹ singleton()ï¼šå…¨å±€åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ instance()ï¼šç»‘å®šä¸€ä¸ªç°æˆçš„å¯¹è±¡ */ 2ã€è‡ªåŠ¨ä¾èµ–æ³¨å…¥\nLaravel å®¹å™¨å¯ä»¥è‡ªåŠ¨è§£ææ„é€ å‡½æ•°ä¾èµ–ï¼š class OrderController extends Controller { protected $userService; public function __construct(UserServiceInterface $userService) { $this-\u003euserService = $userService; } public function index() { return $this-\u003euserService-\u003eall(); } } OrderController æ„é€ å‡½æ•°ä¾èµ–äº† UserServiceInterface Laravel ä¼šè‡ªåŠ¨ä»å®¹å™¨ä¸­è§£æç»‘å®šçš„å®ç° UserService å¹¶æ³¨å…¥ 3ã€é—­åŒ…ç»‘å®š\n$this-\u003eapp-\u003ebind('foo', function ($app) { return new FooBar($app['config']['foo']); }); $foo = app('foo'); è¿™ç§æ–¹å¼é€‚åˆéœ€è¦è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ã€‚ 4ã€ä¸Šä¸‹æ–‡ç»‘å®š\nåœ¨ä¸åŒåœºæ™¯ä¸‹ä¸ºåŒä¸€ä¸ªæ¥å£æä¾›ä¸åŒå®ç°ï¼š use App\\Services\\SmsSender; use App\\Services\\EmailSender; use App\\Contracts\\Notification; $this-\u003eapp-\u003ewhen(OrderController::class) -\u003eneeds(Notification::class) -\u003egive(SmsSender::class); $this-\u003eapp-\u003ewhen(UserController::class) -\u003eneeds(Notification::class) -\u003egive(EmailSender::class); OrderController æ³¨å…¥çš„æ˜¯ SmsSender UserController æ³¨å…¥çš„æ˜¯ EmailSender 5ã€æ ‡ç­¾\nå¤šä¸ªç±»æ‰“æ ‡ç­¾ï¼Œä¸€æ¬¡æ€§è§£æã€‚ $this-\u003eapp-\u003ebind('Mailer', SmtpMailer::class); $this-\u003eapp-\u003ebind('Notifier', SlackNotifier::class); $this-\u003eapp-\u003etag(['Mailer', 'Notifier'], 'messaging'); $services = $this-\u003eapp-\u003etagged('messaging'); å››ã€åœ¨Laravelå“ªé‡Œç”¨ã€‚\n1ã€å¯¹å¤–ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰\n2ã€ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œæ–¹ä¾¿å•å…ƒæµ‹è¯•\n3ã€åœ¨ ServiceProvider ä¸­é›†ä¸­ç»‘å®šä¾èµ–\n4ã€å°½é‡ç”¨ä¾èµ–æ³¨å…¥è€Œä¸æ˜¯ Facadeï¼Œå¯æµ‹è¯•æ€§æ›´å¼º\näº”ã€é€‚ç”¨IoCçš„åœºæ™¯\n1. ä¾èµ–å¯èƒ½ä¼šæ›¿æ¢/æ‰©å±• * æ”¯ä»˜ï¼šæ”¯ä»˜å® / å¾®ä¿¡ / PayPal * é€šçŸ¥ï¼šçŸ­ä¿¡ / é‚®ä»¶ / Slack * å­˜å‚¨ï¼šæœ¬åœ° / AWS S3 / é˜¿é‡Œäº‘ OSS 2. éœ€è¦å†™å•å…ƒæµ‹è¯• * æµ‹è¯•æ—¶ï¼Œå¯ä»¥ç”¨ IoC æ³¨å…¥ä¸€ä¸ªå‡çš„å®ç°ï¼ˆMockï¼‰ï¼Œä¸ç”¨ä¾èµ–çœŸå®æœåŠ¡ã€‚ * ä¾‹å¦‚ï¼šç”¨ FakePaymentService æ›¿æ¢çœŸå®çš„æ”¯ä»˜æ¥å£ã€‚ 3. å¤šäººåä½œ/å¤§é¡¹ç›® * ä¸åŒå›¢é˜Ÿè´Ÿè´£ä¸åŒæ¨¡å—ï¼Œé€šè¿‡æ¥å£çº¦å®šè§£è€¦ï¼Œé¿å…ç›¸äº’ä¿®æ”¹ä»£ç ã€‚ 4. ä¾èµ–å¤æ‚ï¼ŒåµŒå¥—å±‚çº§å¤š * A ä¾èµ– Bï¼ŒB ä¾èµ– C â€¦ * ç”¨ IoC å®¹å™¨æ—¶ï¼ŒLaravel ä¼šè‡ªåŠ¨é€šè¿‡åå°„å¸®ä½ è§£æä¾èµ–ï¼Œå°‘å†™å¾ˆå¤š newã€‚ å…­ã€ä¸ºä»€ä¹ˆç”¨æ§åˆ¶åè½¬\nè¿™æ˜¯ ä»¥ç©ºé—´æ¢æ—¶é—´ æˆ– ä»¥å¤æ‚æ¢çµæ´» çš„å…¸å‹ä¾‹å­ã€‚ åœºæ™¯å°ã€å˜åŒ–å°‘ â†’ ç›´æ¥ newï¼Œæ²¡é—®é¢˜ï¼Œæˆæœ¬ä½ã€‚ åœºæ™¯å¤§ã€ä¾èµ–å¤šã€å¯èƒ½æ›¿æ¢å®ç° â†’ IoC å°±èƒ½æ˜¾è‘—é™ä½ç»´æŠ¤æˆæœ¬ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š * å¦‚æœä½ å†™çš„æ˜¯ä¸€ä¸ª å°å·¥å…·è„šæœ¬ï¼Œå°± 1 ä¸ªç±»ï¼Œnew ç»å¯¹åˆ’ç®—ã€‚ * å¦‚æœä½ å†™çš„æ˜¯ ç”µå•†ç³»ç»Ÿï¼š * æ”¯ä»˜æ¥å£å¯èƒ½æœ‰ æ”¯ä»˜å® / å¾®ä¿¡ / PayPal * å‘è´§æ¥å£å¯èƒ½æœ‰ é¡ºä¸° / åœ†é€š / äº¬ä¸œç‰©æµ * é€šçŸ¥å¯èƒ½æœ‰ çŸ­ä¿¡ / é‚®ä»¶ / Slack ğŸ‘‰ å¦‚æœä¸ç”¨ IoCï¼Œä½ çš„ä»£ç é‡Œåˆ°å¤„æ˜¯ if-else æˆ–è€… switchï¼Œæ”¹ä¸€æ¬¡éœ€æ±‚è¦å…¨å±€æœä»£ç ï¼› ğŸ‘‰ ç”¨ IoCï¼Œåªéœ€è¦ æ”¹ç»‘å®šå…³ç³»ï¼Œç”šè‡³å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡åŠ¨æ€åˆ‡æ¢å®ç°ã€‚ ä¸ƒã€IoC å’Œ DI çš„å…³ç³»å’ŒåŒºåˆ«\nIoCæ˜¯ä¸€ç§æ€æƒ³ï¼Œæ ¸å¿ƒæ˜¯â€œè°æ¥è´Ÿè´£ä¾èµ–çš„åˆ›å»ºâ€ã€‚ ä¸ºä»€ä¹ˆ\nDI æ˜¯ä¸€ç§å…·ä½“å®ç°æ‰‹æ®µï¼ŒæŠŠä¾èµ–ä»å¤–éƒ¨ä¼ è¿›æ¥ã€‚ æ€ä¹ˆåš\nå…«ã€DI å¸¸ç”¨æ–¹æ³•\n1ã€æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæœ€å¸¸ç”¨ï¼‰\nclass Driver { protected $car; // Car ç”±å¤–éƒ¨ä¼ å…¥ï¼Œè€Œä¸æ˜¯è‡ªå·± new public function __construct(Car $car) { $this-\u003ecar = $car; } } 2ã€Setteræ³¨å…¥\nclass Driver { protected $car; public function setCar(Car $car) { $this-\u003ecar = $car; } } 3ã€æ–¹æ³•æ³¨å…¥ã€‚\nclass Driver { public function drive(Car $car) { $car-\u003erun(); } } ","wordCount":"449","inLanguage":"en","datePublished":"2025-08-23T14:42:20+08:00","dateModified":"2025-08-23T14:42:20+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://qhdtony.github.io/posts/laravel-ioc/"},"publisher":{"@type":"Organization","name":"ä¸“æ³¨å½“ä¸‹","logo":{"@type":"ImageObject","url":"https://qhdtony.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qhdtony.github.io/ accesskey=h title="ä¸“æ³¨å½“ä¸‹ (Alt + H)">ä¸“æ³¨å½“ä¸‹</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Laravel Ioc</h1><div class=post-meta><span title='2025-08-23 14:42:20 +0800 CST'>August 23, 2025</span></div></header><div class=post-content><p>ä¸€ã€ä»€ä¹ˆæ˜¯Iocå®¹å™¨ã€‚</p><p>è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œåœ¨è¿™ä¸ªå®¹å™¨é‡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><pre tabindex=0><code>IoC å®¹å™¨çš„ä½œç”¨
1. è§£è€¦
    * ç±»ä¸å†è‡ªå·±å»å®ä¾‹åŒ–ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ã€‚
    * æ–¹ä¾¿æ›¿æ¢å®ç°ï¼ˆå¦‚æ¥å£ç»‘å®šä¸åŒçš„å®ç°ç±»ï¼‰ã€‚
2. ä¾èµ–ç®¡ç†
    * ç»Ÿä¸€åœ¨å®¹å™¨ä¸­ç®¡ç†ä¾èµ–å…³ç³»ï¼Œé¿å…åˆ°å¤„ newã€‚
3. æœåŠ¡è§£æ
    * é€šè¿‡å®¹å™¨ make() æ–¹æ³•å³å¯è§£æå¹¶è¿”å›å¯¹è±¡ã€‚

Laravel IoC å®¹å™¨æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ä¾èµ–ç®¡ç†å™¨ï¼Œå®ƒç»´æŠ¤ä¸€ä¸ª ç»‘å®šè¡¨ï¼ˆbindingsï¼‰å’Œä¸€ä¸ª å®ä¾‹è¡¨ï¼ˆinstancesï¼‰ï¼Œè§£ææ—¶é€šè¿‡ï¼š
1. æŸ¥çœ‹æœ‰æ²¡æœ‰ç»‘å®š
2. å¦‚æœæ²¡æœ‰ç»‘å®šï¼Œå°±é€šè¿‡ åå°„æœºåˆ¶ è‡ªåŠ¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶é€’å½’è§£æå…¶ä¾èµ–
æ ¸å¿ƒæ–‡ä»¶ï¼š
* Illuminate\Container\Container
</code></pre><p>äºŒã€åŸç†å¯¹æ¯”ç†è§£ã€‚</p><p>1ã€æ™®é€šå†™æ³•</p><pre tabindex=0><code>/*
éœ€æ±‚ï¼š
ä½ æƒ³å¼€è½¦å‡ºé—¨ã€‚
ä½ å¾—è‡ªå·±é€ ä¸€å°è½¦ï¼ˆå‘åŠ¨æœºã€è½®èƒã€è½¦é—¨éƒ½è¦è‡ªå·±ç»„è£…ï¼‰ã€‚
æƒ³æ¢è½¦ï¼Ÿé‚£ä½ åˆå¾—é‡æ–°é€ ä¸€å°
å³éœ€è¦åŠ¨ä¸šåŠ¡ä»£ç 
*/
class Driver {
    public function __construct() {
        $this-&gt;car = new BMW();//æ¯æ¬¡éƒ½è¦æ”¹ç±»
    }


    public function drive() {
        $this-&gt;car-&gt;run();
    }
}

(new Driver())-&gt;drive();

Driver å›ºå®šç»‘å®š äº† BMWï¼Œæƒ³æ¢æˆ Tesla å¿…é¡»æ”¹æºç ã€‚

è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ºäº†åˆ›å»ºçµæ´»çš„ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥åœ¨Driver::__construct()çš„æ„é€ å‡½æ•°é‡Œæ·»åŠ å­—ç¬¦å‚æ•°ã€‚
ç±»ä¼¼äº:
class Driver {
    public function __construct($carname) {
        $this-&gt;car = new BMW($carname);//æ¯æ¬¡éƒ½è¦New
    }
    public function drive() {
        $this-&gt;car-&gt;run();
    }
}
(new Driver(&#34;civic&#34;))-&gt;drive();

ä½†æ˜¯æ¡†æ¶ä¸ä¼šè¿™æ ·ç®€å•è€ƒè™‘ï¼Œå› ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¿˜è¦å»ç»´æŠ¤ï¼ˆä¾‹å¦‚æ”¾åˆ°æ•°ç»„é‡Œï¼‰ï¼Œæ²¡æœ‰æ˜¾ç¤ºè¡¨è¾¾å‡ºæ¥ã€‚
è¿™é‡Œè¯´çš„æ˜¾ç¤ºè¡¨è¾¾ç±»ä¼¼äºlaravelé‡Œé¢çš„ï¼š
$this-&gt;app-&gt;bind(Car::class, Tesla::class);
</code></pre><p>2ã€æ§åˆ¶åè½¬å†™æ³•</p><pre tabindex=0><code>&lt;?php

//éœ€æ±‚ï¼šæˆ‘è¦ä¸€è¾†è½¦ï¼Œå•¥ç‰Œå­æ— æ‰€è°“ï¼Œèƒ½è·‘å°±è¡Œã€‚
//ä½ åªè´Ÿè´£å¼€è½¦ï¼Œä¸å…³å¿ƒè½¦æ˜¯æ€ä¹ˆé€ å‡ºæ¥çš„ã€‚

//åˆ‡æ¢å®ç°çš„æ—¶å€™ï¼Œåªæ”¹ ç»‘å®šå…³ç³»ï¼Œä¸ç”¨åŠ¨ä¸šåŠ¡ä»£ç ã€‚
Interface Car {
    Public function run();
}


Class CT5 implements Car {
    Public function run() {
        echo &#34;CT5 run&#34;;
    }
}


Class Accord implements Car {
    Public function run() {
        echo &#34;Honda run&#34;;
    }
}


Class Driver {
    Protected $car;
    Public function __construct(Car $car) {
        $this-&gt;car = $car;
    }
    Public function drive() {
        $this-&gt;car-&gt;run();
    }
}


(new Driver(new CT5()))-&gt;drive();//è¿™æ ·å†™ä¼šå¾ˆå¤æ‚ã€‚

æ›¿æ¢æˆç±»ä¼¼ $this-&gt;app-&gt;bind(Car::class,CT5::class); laravelçš„å†™æ³• å°±æ¯”è¾ƒæ¸…æ™°ã€‚
</code></pre><p>ä¸‰ã€Laravel ä¸­ æ€ä¹ˆç”¨</p><p>1ã€ç»‘å®šå’Œè§£æ</p><pre tabindex=0><code>use App\Services\UserService;
use App\Services\Contracts\UserServiceInterface;


// åœ¨æœåŠ¡æä¾›è€…ä¸­ç»‘å®šï¼ˆAppServiceProvider æˆ–è‡ªå®šä¹‰ï¼‰
$this-&gt;app-&gt;bind(UserServiceInterface::class, UserService::class);


// åœ¨æ§åˆ¶å™¨æˆ–å…¶ä»–åœ°æ–¹è§£æ
$userService = app(UserServiceInterface::class);
// æˆ–è€…
$userService = resolve(UserServiceInterface::class);

/*
bind()ï¼šæ¯æ¬¡è§£æè¿”å›ä¸€ä¸ªæ–°å®ä¾‹
singleton()ï¼šå…¨å±€åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰
instance()ï¼šç»‘å®šä¸€ä¸ªç°æˆçš„å¯¹è±¡
*/
</code></pre><p>2ã€è‡ªåŠ¨ä¾èµ–æ³¨å…¥</p><pre tabindex=0><code>Laravel å®¹å™¨å¯ä»¥è‡ªåŠ¨è§£ææ„é€ å‡½æ•°ä¾èµ–ï¼š
class OrderController extends Controller
{
    protected $userService;


    public function __construct(UserServiceInterface $userService)
    {
        $this-&gt;userService = $userService;
    }


    public function index()
    {
        return $this-&gt;userService-&gt;all();
    }
}

OrderController æ„é€ å‡½æ•°ä¾èµ–äº† UserServiceInterface
Laravel ä¼šè‡ªåŠ¨ä»å®¹å™¨ä¸­è§£æç»‘å®šçš„å®ç° UserService å¹¶æ³¨å…¥
</code></pre><p>3ã€é—­åŒ…ç»‘å®š</p><pre tabindex=0><code>$this-&gt;app-&gt;bind(&#39;foo&#39;, function ($app) {
    return new FooBar($app[&#39;config&#39;][&#39;foo&#39;]);
});
$foo = app(&#39;foo&#39;);
è¿™ç§æ–¹å¼é€‚åˆéœ€è¦è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºå¯¹è±¡çš„åœºæ™¯ã€‚
</code></pre><p>4ã€ä¸Šä¸‹æ–‡ç»‘å®š</p><pre tabindex=0><code>åœ¨ä¸åŒåœºæ™¯ä¸‹ä¸ºåŒä¸€ä¸ªæ¥å£æä¾›ä¸åŒå®ç°ï¼š
use App\Services\SmsSender;
use App\Services\EmailSender;
use App\Contracts\Notification;


$this-&gt;app-&gt;when(OrderController::class)
          -&gt;needs(Notification::class)
          -&gt;give(SmsSender::class);


$this-&gt;app-&gt;when(UserController::class)
          -&gt;needs(Notification::class)
          -&gt;give(EmailSender::class);

OrderController æ³¨å…¥çš„æ˜¯ SmsSender
UserController æ³¨å…¥çš„æ˜¯ EmailSender
</code></pre><p>5ã€æ ‡ç­¾</p><pre tabindex=0><code>å¤šä¸ªç±»æ‰“æ ‡ç­¾ï¼Œä¸€æ¬¡æ€§è§£æã€‚

$this-&gt;app-&gt;bind(&#39;Mailer&#39;, SmtpMailer::class);
$this-&gt;app-&gt;bind(&#39;Notifier&#39;, SlackNotifier::class);

$this-&gt;app-&gt;tag([&#39;Mailer&#39;, &#39;Notifier&#39;], &#39;messaging&#39;);

$services = $this-&gt;app-&gt;tagged(&#39;messaging&#39;);
</code></pre><p>å››ã€åœ¨Laravelå“ªé‡Œç”¨ã€‚</p><p>1ã€å¯¹å¤–ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰</p><p>2ã€ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œæ–¹ä¾¿å•å…ƒæµ‹è¯•</p><p>3ã€åœ¨ ServiceProvider ä¸­é›†ä¸­ç»‘å®šä¾èµ–</p><p>4ã€å°½é‡ç”¨ä¾èµ–æ³¨å…¥è€Œä¸æ˜¯ Facadeï¼Œå¯æµ‹è¯•æ€§æ›´å¼º</p><p>äº”ã€é€‚ç”¨IoCçš„åœºæ™¯</p><pre tabindex=0><code>1. ä¾èµ–å¯èƒ½ä¼šæ›¿æ¢/æ‰©å±•
    * æ”¯ä»˜ï¼šæ”¯ä»˜å® / å¾®ä¿¡ / PayPal
    * é€šçŸ¥ï¼šçŸ­ä¿¡ / é‚®ä»¶ / Slack
    * å­˜å‚¨ï¼šæœ¬åœ° / AWS S3 / é˜¿é‡Œäº‘ OSS
2. éœ€è¦å†™å•å…ƒæµ‹è¯•
    * æµ‹è¯•æ—¶ï¼Œå¯ä»¥ç”¨ IoC æ³¨å…¥ä¸€ä¸ªå‡çš„å®ç°ï¼ˆMockï¼‰ï¼Œä¸ç”¨ä¾èµ–çœŸå®æœåŠ¡ã€‚
    * ä¾‹å¦‚ï¼šç”¨ FakePaymentService æ›¿æ¢çœŸå®çš„æ”¯ä»˜æ¥å£ã€‚
3. å¤šäººåä½œ/å¤§é¡¹ç›®
    * ä¸åŒå›¢é˜Ÿè´Ÿè´£ä¸åŒæ¨¡å—ï¼Œé€šè¿‡æ¥å£çº¦å®šè§£è€¦ï¼Œé¿å…ç›¸äº’ä¿®æ”¹ä»£ç ã€‚
4. ä¾èµ–å¤æ‚ï¼ŒåµŒå¥—å±‚çº§å¤š
    * A ä¾èµ– Bï¼ŒB ä¾èµ– C â€¦
    * ç”¨ IoC å®¹å™¨æ—¶ï¼ŒLaravel ä¼šè‡ªåŠ¨é€šè¿‡åå°„å¸®ä½ è§£æä¾èµ–ï¼Œå°‘å†™å¾ˆå¤š newã€‚
</code></pre><p>å…­ã€ä¸ºä»€ä¹ˆç”¨æ§åˆ¶åè½¬</p><pre tabindex=0><code>è¿™æ˜¯ ä»¥ç©ºé—´æ¢æ—¶é—´ æˆ– ä»¥å¤æ‚æ¢çµæ´» çš„å…¸å‹ä¾‹å­ã€‚

åœºæ™¯å°ã€å˜åŒ–å°‘ â†’ ç›´æ¥ newï¼Œæ²¡é—®é¢˜ï¼Œæˆæœ¬ä½ã€‚
åœºæ™¯å¤§ã€ä¾èµ–å¤šã€å¯èƒ½æ›¿æ¢å®ç° â†’ IoC å°±èƒ½æ˜¾è‘—é™ä½ç»´æŠ¤æˆæœ¬ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š
* å¦‚æœä½ å†™çš„æ˜¯ä¸€ä¸ª å°å·¥å…·è„šæœ¬ï¼Œå°± 1 ä¸ªç±»ï¼Œnew ç»å¯¹åˆ’ç®—ã€‚
* å¦‚æœä½ å†™çš„æ˜¯ ç”µå•†ç³»ç»Ÿï¼š
    * æ”¯ä»˜æ¥å£å¯èƒ½æœ‰ æ”¯ä»˜å® / å¾®ä¿¡ / PayPal
    * å‘è´§æ¥å£å¯èƒ½æœ‰ é¡ºä¸° / åœ†é€š / äº¬ä¸œç‰©æµ
    * é€šçŸ¥å¯èƒ½æœ‰ çŸ­ä¿¡ / é‚®ä»¶ / Slack

ğŸ‘‰ å¦‚æœä¸ç”¨ IoCï¼Œä½ çš„ä»£ç é‡Œåˆ°å¤„æ˜¯ if-else æˆ–è€… switchï¼Œæ”¹ä¸€æ¬¡éœ€æ±‚è¦å…¨å±€æœä»£ç ï¼›
ğŸ‘‰ ç”¨ IoCï¼Œåªéœ€è¦ æ”¹ç»‘å®šå…³ç³»ï¼Œç”šè‡³å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡åŠ¨æ€åˆ‡æ¢å®ç°ã€‚
</code></pre><p>ä¸ƒã€IoC å’Œ DI çš„å…³ç³»å’ŒåŒºåˆ«</p><p>IoCæ˜¯ä¸€ç§æ€æƒ³ï¼Œæ ¸å¿ƒæ˜¯â€œè°æ¥è´Ÿè´£ä¾èµ–çš„åˆ›å»ºâ€ã€‚ ä¸ºä»€ä¹ˆ</p><p>DI æ˜¯ä¸€ç§å…·ä½“å®ç°æ‰‹æ®µï¼ŒæŠŠä¾èµ–ä»å¤–éƒ¨ä¼ è¿›æ¥ã€‚ æ€ä¹ˆåš</p><p>å…«ã€DI å¸¸ç”¨æ–¹æ³•</p><p>1ã€æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæœ€å¸¸ç”¨ï¼‰</p><pre tabindex=0><code>class Driver {
    protected $car;


    // Car ç”±å¤–éƒ¨ä¼ å…¥ï¼Œè€Œä¸æ˜¯è‡ªå·± new
    public function __construct(Car $car) {
        $this-&gt;car = $car;
    }
}
</code></pre><p>2ã€Setteræ³¨å…¥</p><pre tabindex=0><code>class Driver {
    protected $car;
    public function setCar(Car $car) {
        $this-&gt;car = $car;
    }
}
</code></pre><p>3ã€æ–¹æ³•æ³¨å…¥ã€‚</p><pre tabindex=0><code>class Driver {
    public function drive(Car $car) {
        $car-&gt;run();
    }
}
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://qhdtony.github.io/tags/laravel/>Laravel</a></li><li><a href=https://qhdtony.github.io/tags/ioc/>Ioc</a></li><li><a href=https://qhdtony.github.io/tags/di/>Di</a></li><li><a href=https://qhdtony.github.io/tags/%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC/>æ§åˆ¶åè½¬</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://qhdtony.github.io/>ä¸“æ³¨å½“ä¸‹</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>